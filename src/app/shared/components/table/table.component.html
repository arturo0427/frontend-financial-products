<div class="table">
  <div class="table__head">
    <div>Logo</div>
    <div>Nombre de producto</div>
    <div class="th-with-icon">
      Descripción
      <img
        src="assets/icons/info-circle.svg"
        alt="Información"
        class="info-icon"
        title="Información adicional"
      />
    </div>
    <div class="th-with-icon">
      Fecha de liberación
      <img
        class="info-icon"
        src="assets/icons/info-circle.svg"
        alt=""
        aria-hidden="true"
      />
    </div>
    <div class="th-with-icon">
      Fecha de reestructuración
      <img
        class="info-icon"
        src="assets/icons/info-circle.svg"
        alt=""
        aria-hidden="true"
      />
    </div>
    <div class="table__actions">Acciones</div>
  </div>

  @for (item of items; track item.id) {
    <div class="table__row">
      <div>
        <img
          class="logo"
          [src]="item.logo ? item.logo : 'assets/images/200x200.png'"
          [alt]="item.name"
        />
      </div>
      <div class="strong">{{ item.name }}</div>
      <div class="muted clamp">{{ item.description }}</div>
      <div class="mono">{{ item.date_release }}</div>
      <div class="mono">{{ item.date_revision }}</div>

      <div class="actions">
        <button
          class="action-toggle"
          type="button"
          (click)="toggleMenu($event, item.id)"
          [attr.aria-expanded]="menuOpenFor === item.id"
          aria-haspopup="menu"
          aria-controls="table-actions-menu"
          aria-label="Acciones"
        >
          <span class="action-toggle__dots" aria-hidden="true">
            <span></span>
            <span></span>
            <span></span>
          </span>
          <span class="sr-only">Acciones</span>
        </button>
      </div>
    </div>
  }

  @if (menuOpenFor && menuPosition) {
    <div
      id="table-actions-menu"
      class="dropdown dropdown--floating"
      role="menu"
      [style.top.px]="menuPosition.top"
      [style.left.px]="menuPosition.left"
      (click)="$event.stopPropagation()"
    >
      <button
        type="button"
        role="menuitem"
        class="dropdown__item"
        (click)="onEdit(menuOpenFor)"
      >
        Editar
      </button>
      <button
        type="button"
        role="menuitem"
        class="dropdown__item dropdown__item--danger"
        (click)="onRemove(menuOpenFor)"
      >
        Eliminar
      </button>
    </div>
  }
</div>
